
/*! aping-plugin-youtube 15-11-2015 */
"use strict";var jjtApingYoutube=angular.module("jtt_aping_youtube",["jtt_youtube"]).directive("apingYoutube",["youtubeFactory","apingApiKeys","apingYoutubeHelper","apingUtilityHelper",function(a,b,c,d){return{require:"?aping",restrict:"A",replace:"false",link:function(e,f,g,h){var i="youtube",j=h.getAppSettings(),k=d.parseJsonFromAttributes(g.apingYoutube,i);k.forEach(function(d){var e={key:b.youtube,maxResults:d.items||j.items};d.channelId?(e.channelId=d.channelId,d.search&&(e.searchString=d.search),a.getVideosFromChannelById(e).success(function(a){a&&h.concatToResults(c.getObjectByJsonData(a,j.type))})):d.search?(e.searchString=d.search,a.getVideosFromSearchByString(e).success(function(a){a&&h.concatToResults(c.getObjectByJsonData(a,j.type))})):d.playlistId&&(e.playlistId=d.playlistId,a.getVideosFromPlaylistById(e).success(function(a){a&&h.concatToResults(c.getObjectByJsonData(a,j.type))}))})}}}]);jjtApingYoutube.service("apingYoutubeHelper",["apingOutputObjects","apingTimeHelper","apingUtilityHelper",function(a,b,c){this.getObjectByJsonData=function(a,b){var c=[];if(a){var d=this;a.items&&angular.forEach(a.items,function(a,e){c.push(d.getItemByJsonData(a,b))})}return c},this.getItemByJsonData=function(a,b){var c={};if(a&&b)switch(b){case"social":c=this.getSocialItemByJsonData(a);break;case"video":c=this.getVideoItemByJsonData(a)}return c},this.getSocialItemByJsonData=function(d){var e=a.getNew("social","youtube");return $.extend(!0,e,{blog_name:d.snippet.channelTitle||!1,blog_id:d.snippet.channelId||!1,blog_link:"https://www.youtube.com/channel/"+d.snippet.channelId,intern_type:d.id.kind,date:d.snippet.publishedAt,intern_id:d.id.videoId||d.snippet.resourceId.videoId,timestamp:b.getTimestampFromDateString(d.snippet.publishedAt,1e3,7200)}),""!==d.snippet.title&&""!==d.snippet.description?(e.caption=d.snippet.title,e.text=d.snippet.description):""!==d.snippet.title?e.caption=d.snippet.title:e.caption=d.snippet.description,"youtube#video"==d.id.kind?e.type="video":"youtube#playlistItem"==d.kind&&d.snippet.resourceId&&"youtube#video"==d.snippet.resourceId.kind&&(e.type="video",e.position=d.snippet.position),e.img_url=c.getYoutubeImageFromId(e.intern_id),e.post_url="https://www.youtube.com/watch?v="+e.intern_id,e},this.getVideoItemByJsonData=function(d){var e=a.getNew("video","youtube");return $.extend(!0,e,{blog_name:d.snippet.channelTitle||!1,blog_id:d.snippet.channelId||!1,blog_link:"https://www.youtube.com/channel/"+d.snippet.channelId,intern_type:d.id.kind,date:d.snippet.publishedAt,intern_id:d.id.videoId||d.snippet.resourceId.videoId,timestamp:b.getTimestampFromDateString(d.snippet.publishedAt,1e3,7200)}),""!==d.snippet.title&&""!==d.snippet.description?(e.caption=d.snippet.title,e.text=d.snippet.description):""!==d.snippet.title?e.caption=d.snippet.title:e.caption=d.snippet.description,e.img_url=c.getYoutubeImageFromId(e.intern_id),e.post_url="https://www.youtube.com/watch?v="+e.intern_id,e.position=d.snippet.position,e.markup='<iframe width="1280" height="720" src="https://www.youtube.com/embed/'+e.intern_id+'?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>',e}}]);